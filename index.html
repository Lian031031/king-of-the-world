<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>King of the World | Lian</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>King of the World</h1>
    <p>Visi√≥n. Elegancia. Poder.</p>
  </header>

  <!-- Secci√≥n de bienvenida -->
  <section class="bienvenido" id="mensaje">
    <h2>No todos est√°n listos para este nivel.</h2>
    <p class="mensaje-transformador">
      Pero si t√∫ lo est√°s, aqu√≠ no solo encontrar√°s visi√≥n y prop√≥sito.<br>
      Encontrar√°s un equipo que transforma ideas en imperios.
    </p>
    <p class="destacado">
      √önete a los que no esperan el cambio. Lo crean.<br>
      <span>Hazte miembro. El mundo no se conquista solo.</span>
    </p>
    <a href="javascript:void(0);" class="boton-unirse" onclick="mostrarRegistro()">Hazte miembro</a><br>
    <a href="javascript:void(0);" class="boton-login" onclick="mostrarLogin()">Ya soy miembro</a>
  </section>

  <!-- Formulario de registro -->
  <section id="registro" style="display:none;">
    <h2>Hazte miembro</h2>
    <form id="formRegistro">
      <input type="text" id="nombre" placeholder="Nombre completo" required>
      <input type="email" id="correo" placeholder="Correo electr√≥nico" required>
      <input type="password" id="password" placeholder="Contrase√±a" required>
      <input type="password" id="confirmar" placeholder="Confirmar contrase√±a" required>
      <button type="submit">Registrarme</button>
      <button type="button" onclick="volver()">Volver atr√°s</button>
    </form>
  </section>

  <!-- Formulario de login -->
  <section id="login" style="display:none;">
    <h2>Inicio de sesi√≥n</h2>
    <form id="formLogin">
      <input type="email" id="loginCorreo" placeholder="Correo electr√≥nico" required>
      <input type="password" id="loginPassword" placeholder="Contrase√±a" required>
      <button type="submit">Entrar</button>
      <button type="button" onclick="volver()">Volver atr√°s</button>
      <a href="javascript:void(0);" onclick="mostrarRecuperacion()" style="color:#00796B; font-size:0.9em;">¬øOlvidaste tu contrase√±a?</a>
    </form>
  </section>

  <!-- Formulario de recuperaci√≥n adaptado a EmailJS -->
  <section id="recuperar" style="display:none;">
    <h2>Recuperar contrase√±a</h2>
    <form id="formRecuperar">
      <input type="text" name="name" id="recuperarNombre" placeholder="Tu nombre" required>
      <input type="email" name="email" id="recuperarCorreo" placeholder="Correo registrado" required>
      <input type="text" name="title" value="Recuperaci√≥n de contrase√±a" style="display:none;">
      <textarea name="content" style="display:none;">
Tu nueva contrase√±a es: Rey2025üî•  
Recuerda: los l√≠deres no se rinden, se reinventan.
      </textarea>
      <button type="submit">Enviar nueva contrase√±a</button>
      <button type="button" onclick="volver()">Volver atr√°s</button>
      <div id="mensajeExito" style="margin-top:10px; color:#0f0;"></div>
    </form>
  </section>

  <!-- Scripts -->
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    // Inicializar EmailJS
    (function() {
      emailjs.init("JoDSLYti5HhPdIQ-m");
    })();

    // Mostrar secciones
    function mostrarRegistro() {
      document.getElementById("mensaje").style.display = "none";
      document.getElementById("registro").style.display = "block";
    }

    function mostrarLogin() {
      document.getElementById("mensaje").style.display = "none";
      document.getElementById("login").style.display = "block";
    }

    function mostrarRecuperacion() {
      document.getElementById("login").style.display = "none";
      document.getElementById("recuperar").style.display = "block";
    }

    function volver() {
      document.getElementById("registro").style.display = "none";
      document.getElementById("login").style.display = "none";
      document.getElementById("recuperar").style.display = "none";
      document.getElementById("mensaje").style.display = "block";
    }

    // Recuperaci√≥n por EmailJS
    document.getElementById("formRecuperar").addEventListener("submit", function(e) {
      e.preventDefault();
      emailjs.sendForm("kingoftheworld031031", "template_h2ft9ts", this)
        .then(function(response) {
          document.getElementById("mensajeExito").innerText = "‚úÖ Contrase√±a enviada con √©xito. Revisa tu correo.";
        }, function(error) {
          document.getElementById("mensajeExito").innerText = "‚ùå Error al enviar. Intenta de nuevo.";
          console.error("Error:", error);
        });
    });

    // Registro
    document.getElementById("formRegistro").addEventListener("submit", function(e) {
      e.preventDefault();
      const nombre = document.getElementById("nombre").value;
      const correo = document.getElementById("correo").value;
      const password = document.getElementById("password").value;
      const confirmar = document.getElementById("confirmar").value;

      if (password !== confirmar) {
        alert("Las contrase√±as no coinciden.");
        return;
      }

      const nuevoUsuario = { nombre, correo, clave: password };
      const usuarios = JSON.parse(localStorage.getItem("usuariosRegistrados")) || [];
      usuarios.push(nuevoUsuario);
      localStorage.setItem("usuariosRegistrados", JSON.stringify(usuarios));
      localStorage.setItem("usuarioActivo", JSON.stringify({ nombre, correo }));

      window.location.href = "bienvenido.html";
    });

    // Login
    document.getElementById("formLogin").addEventListener("submit", function(e) {
      e.preventDefault();
      const correo = document.getElementById("loginCorreo").value;
      const clave = document.getElementById("loginPassword").value;

      const usuarios = JSON.parse(localStorage.getItem("usuariosRegistrados")) || [];
      const usuarioEncontrado = usuarios.find(u => u.correo === correo && u.clave === clave);

      if (usuarioEncontrado) {
        localStorage.setItem("usuarioActivo", JSON.stringify({
          nombre: usuarioEncontrado.nombre || "Miembro",
          correo: usuarioEncontrado.correo
        }));
        window.location.href = "bienvenido.html";
      } else {
        alert("Credenciales incorrectas.");
      }
    });
  </script>
</body>
</html>
